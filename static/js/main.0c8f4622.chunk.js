(this.webpackJsonpepic=this.webpackJsonpepic||[]).push([[2],{106:function(e,t,n){"use strict";n.r(t);var r=n(5),o=n(0),i=n(22),c=n.n(i),a=(n(74),n(24)),s=n.p+"static/media/logo.ff6a9e0c.png",u=n(34),p=n(8),l=n(26),f=n(107),b=n(59),j=n(63);function O(){var e=Object(a.a)(["\n    margin-left: 10px; \n"]);return O=function(){return e},e}function h(){var e=Object(a.a)(["\n    margin-left: auto;\n    text-decoration: none;\n    color: #fff;\n"]);return h=function(){return e},e}function y(){var e=Object(a.a)(["\n    color: #fff;\n    margin-left: 30px;\n\n    &.active {\n        border-bottom: 1px solid #fff;\n    }\n"]);return y=function(){return e},e}function g(){var e=Object(a.a)(["\n    height: 30px;\n    border-radius: 50%;\n"]);return g=function(){return e},e}function d(){var e=Object(a.a)(["\n    display: flex;\n    align-items: center;\n    padding: 20px 100px;\n    background-color: transparent;\n    color: #fff;\n"]);return d=function(){return e},e}var m=l.a.header(d()),v=l.a.img(g()),w=Object(l.a)(u.b)(y()),x=l.a.div(h()),U=Object(l.a)(f.a)(O()),P=Object(j.a)((function(){var e=Object(p.f)(),t=Object(b.a)(),n=t.UserStore,i=t.AuthStore;return Object(o.useEffect)((function(){n.pullUser()}),[]),Object(r.jsxs)(m,{children:[Object(r.jsx)(v,{src:s}),Object(r.jsxs)("nav",{children:[Object(r.jsx)(w,{to:"/",exact:!0,activeClassName:"active",children:"\u9996\u9875"}),Object(r.jsx)(w,{to:"/history",activeClassName:"active",children:"\u5386\u53f2"}),Object(r.jsx)(w,{to:"/about",activeClassName:"active",children:"\u5173\u4e8e"})]}),Object(r.jsx)(x,{children:n.currentUser?Object(r.jsxs)(r.Fragment,{children:[n.currentUser.attributes.username," ",Object(r.jsx)(U,{type:"primary",onClick:function(){i.logout()},children:"\u6ce8\u9500"})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(U,{type:"primary",onClick:function(){e.push("/login")},children:"\u767b\u5f55"}),Object(r.jsx)(U,{type:"primary",onClick:function(){e.push("/register")},children:"\u6ce8\u518c"})]})})]})}));function k(){var e=Object(a.a)(['\n    padding: 10px 100px;\n    text-align: center;\n    font: 16px  "fantasy";\n    color:  red;\n    bottom: 0;\n    /* background-color: transparent; */\n']);return k=function(){return e},e}var D=l.a.footer(k());var F=function(){return Object(r.jsx)(D,{children:"\u8bf7\u79d1\u5b66\u4e0a\u7f51 \u5982\u6709\u95ee\u9898 \u672c\u7f51\u7ad9\u6982\u4e0d\u8d1f\u8d23"})};function z(){return Object(r.jsx)("div",{children:"Loading..."})}var L=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(6),n.e(9)]).then(n.bind(null,259))})),S=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(5),n.e(8)]).then(n.bind(null,260))})),C=Object(o.lazy)((function(){return n.e(7).then(n.bind(null,257))})),I=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,251))})),M=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,252))}));var N=function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(P,{}),Object(r.jsx)("main",{children:Object(r.jsx)(o.Suspense,{fallback:Object(r.jsx)(z,{}),children:Object(r.jsxs)(p.c,{children:[Object(r.jsx)(p.a,{path:"/",exact:!0,component:L}),Object(r.jsx)(p.a,{path:"/history",component:S}),Object(r.jsx)(p.a,{path:"/about",component:C}),Object(r.jsx)(p.a,{path:"/Login",component:I}),Object(r.jsx)(p.a,{path:"/Register",component:M})]})})}),Object(r.jsx)(F,{})]})},A=(n(105),function(e){e&&e instanceof Function&&n.e(12).then(n.bind(null,253)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),o(e),i(e),c(e)}))});c.a.render(Object(r.jsx)(u.a,{children:Object(r.jsx)(N,{})}),document.getElementById("root")),A()},59:function(e,t,n){"use strict";n.d(t,"a",(function(){return q}));var r=n(0),o=n(12),i=n(27),c=n(28),a=n(6),s=(n(43),n(1)),u=n(19),p=n.n(u);n(90);p.a.init({appId:"g2WSNJhaSM4a9KnNo6K2q1Qf-gzGzoHsz",appKey:"myxtDHEwVrBC70maMDeu5pL3",serverURL:"https://g2wsnjha.lc-cn-n1-shared.com"});var l,f,b,j,O,h,y,g,d,m,v,w,x,U,P=function(e,t){var n=new u.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},k=function(e,t){return new Promise((function(n,r){u.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return r(e)}))}))},D=function(){u.User.logOut()},F=function(){return u.User.current()},z=function(e,t){var n=new p.a.Object("Image"),r=new p.a.File(t,e);return n.set("filename",t),n.set("owner",p.a.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){return e(t)}),(function(e){return t(e)}))}))},L=function(e){var t=e.page,n=void 0===t?0:t,r=e.limit,o=void 0===r?10:r,i=new p.a.Query("Image");return i.include("owner"),i.limit(o),i.skip(n*o),i.descending("createdAt"),i.equalTo("owner",p.a.User.current()),new Promise((function(e,t){i.find().then((function(t){console.log("query"),console.log(t),e(t)})).catch((function(e){return t(e)}))}))},S=function(e){var t=p.a.Object.createWithoutData("Image",e.id);return new Promise((function(e,n){t.destroy().then((function(){return e("success")})).catch((function(e){return n(e)}))}))},C=new(l=function(){function e(){Object(i.a)(this,e),Object(o.a)(this,"currentUser",f,this),Object(s.l)(this)}return Object(c.a)(e,[{key:"pullUser",value:function(){this.currentUser=F()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),f=Object(a.a)(l.prototype,"currentUser",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(a.a)(l.prototype,"pullUser",[s.f],Object.getOwnPropertyDescriptor(l.prototype,"pullUser"),l.prototype),Object(a.a)(l.prototype,"resetUser",[s.f],Object.getOwnPropertyDescriptor(l.prototype,"resetUser"),l.prototype),l),I=n(109),M=new(b=function(){function e(){Object(i.a)(this,e),Object(o.a)(this,"list",j,this),Object(o.a)(this,"isLoading",O,this),Object(o.a)(this,"hasMore",h,this),Object(o.a)(this,"page",y,this),this.limit=10,Object(s.l)(this)}return Object(c.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e),console.log(this.list)}},{key:"find",value:function(){var e=this;this.isLoading=!0,L({page:this.page,limit:this.limit}).then((function(t){e.append(t),e.page++,t.length<e.limit&&(e.hasMore=!1)})).catch((function(e){console.log("\u6570\u636e\u52a0\u8f7d\u5931\u8d25")})).finally((function(){e.isLoading=!1}))}},{key:"reset",value:function(){this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0}},{key:"destroy",value:function(e){S(e).then((function(e){console.log(e),console.log("\u5220\u9664over    ")})),this.list=this.list.filter((function(t){return t!==e}))}}]),e}(),j=Object(a.a)(b.prototype,"list",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=Object(a.a)(b.prototype,"isLoading",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=Object(a.a)(b.prototype,"hasMore",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=Object(a.a)(b.prototype,"page",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(a.a)(b.prototype,"append",[s.f],Object.getOwnPropertyDescriptor(b.prototype,"append"),b.prototype),Object(a.a)(b.prototype,"find",[s.f],Object.getOwnPropertyDescriptor(b.prototype,"find"),b.prototype),Object(a.a)(b.prototype,"reset",[s.f],Object.getOwnPropertyDescriptor(b.prototype,"reset"),b.prototype),Object(a.a)(b.prototype,"destroy",[s.f],Object.getOwnPropertyDescriptor(b.prototype,"destroy"),b.prototype),b),N=new(g=function(){function e(){Object(i.a)(this,e),Object(o.a)(this,"filename",d,this),Object(o.a)(this,"file",m,this),Object(o.a)(this,"isUpLoading",v,this),Object(o.a)(this,"serverFile",w,this),Object(s.l)(this)}return Object(c.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isUpLoading=!0,this.serverFile=null,new Promise((function(t,n){z(e.file,e.filename).then((function(n){e.serverFile=n,t(n)})).catch((function(e){I.b.err("\u4e0a\u4f20\u5931\u8d25"),n(e)})).finally((function(){e.isUpLoading=!1}))}))}},{key:"reset",value:function(){this.isUpLoading=!1,this.serverFile=null}},{key:"destroy",value:function(){this.isUpLoading=!1,this.serverFile=null}}]),e}(),d=Object(a.a)(g.prototype,"filename",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=Object(a.a)(g.prototype,"file",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=Object(a.a)(g.prototype,"isUpLoading",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=Object(a.a)(g.prototype,"serverFile",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(a.a)(g.prototype,"setFilename",[s.f],Object.getOwnPropertyDescriptor(g.prototype,"setFilename"),g.prototype),Object(a.a)(g.prototype,"setFile",[s.f],Object.getOwnPropertyDescriptor(g.prototype,"setFile"),g.prototype),Object(a.a)(g.prototype,"upload",[s.f],Object.getOwnPropertyDescriptor(g.prototype,"upload"),g.prototype),Object(a.a)(g.prototype,"reset",[s.f],Object.getOwnPropertyDescriptor(g.prototype,"reset"),g.prototype),Object(a.a)(g.prototype,"destroy",[s.f],Object.getOwnPropertyDescriptor(g.prototype,"destroy"),g.prototype),g),A=new(x=function(){function e(){Object(i.a)(this,e),Object(o.a)(this,"values",U,this),Object(s.l)(this)}return Object(c.a)(e,[{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){k(e.values.username,e.values.password).then((function(e){C.pullUser(),I.b.success("\u767b\u5f55\u6210\u529f"),t(e)})).catch((function(e){C.resetUser(),I.b.error("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef"),n(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){P(e.values.username,e.values.password).then((function(e){C.pullUser(),I.b.success("\u6ce8\u518c\u6210\u529f"),t(e)})).catch((function(e){C.resetUser(),I.b.error("\u6ce8\u518c\u5931\u8d25"),n(e)}))}))}},{key:"logout",value:function(){D(),C.resetUser(),M.reset(),N.reset()}}]),e}(),U=Object(a.a)(x.prototype,"values",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(a.a)(x.prototype,"setUsername",[s.f],Object.getOwnPropertyDescriptor(x.prototype,"setUsername"),x.prototype),Object(a.a)(x.prototype,"setPassword",[s.f],Object.getOwnPropertyDescriptor(x.prototype,"setPassword"),x.prototype),Object(a.a)(x.prototype,"login",[s.f],Object.getOwnPropertyDescriptor(x.prototype,"login"),x.prototype),Object(a.a)(x.prototype,"register",[s.f],Object.getOwnPropertyDescriptor(x.prototype,"register"),x.prototype),Object(a.a)(x.prototype,"logout",[s.f],Object.getOwnPropertyDescriptor(x.prototype,"logout"),x.prototype),x),H=Object(r.createContext)({AuthStore:A,UserStore:C,ImageStore:N,HistoryStore:M});window.stores={AuthStore:A,UserStore:C,ImageStore:N,HistoryStore:M};var q=function(){return Object(r.useContext)(H)}},74:function(e,t,n){}},[[106,3,4]]]);
//# sourceMappingURL=main.0c8f4622.chunk.js.map