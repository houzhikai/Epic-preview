{"version":3,"sources":["components/List.js","pages/History.js"],"names":["Img","styled","img","H5","h5","A","a","Component","observer","HistoryStore","useStores","useEffect","console","log","reset","initialLoad","pageStart","loadMore","find","hasMore","isLoading","useWindow","dataSource","list","renderItem","item","Item","src","attributes","url","filename","target","href","type","danger","onClick","destroy","handleDestroy","id","tip","H1","h1","History","List"],"mappings":"wrBAYA,IAAMA,EAAMC,IAAOC,IAAV,KAQHC,EAAKF,IAAOG,GAAV,KAIFC,EAAIJ,IAAOK,EAAV,KAgEQC,EA1DGC,aAAS,WAAO,IACtBC,EAAiBC,cAAjBD,aAiBR,OARAE,qBAAU,WAEN,OADAC,QAAQC,IAAI,4BACL,WACHJ,EAAaK,WAElB,IAIC,8BACI,cAAC,IAAD,CACIC,aAAe,EACfC,UAAa,EACbC,SArBK,WACbR,EAAaS,QAqBLC,SAAaV,EAAaW,WAAaX,EAAaU,QACpDE,WAAc,EALlB,SAOI,cAAC,IAAD,CACIC,WAAYb,EAAac,KACzBC,WAEI,SAAAC,GAAI,OAAI,eAAC,IAAKC,KAAN,WACJ,8BACI,cAAC1B,EAAD,CAAK2B,IAAKF,EAAKG,WAAWC,IAAID,WAAWC,QAE7C,8BACI,cAAC1B,EAAD,UAAKsB,EAAKG,WAAWE,aAEzB,8BACI,cAACzB,EAAD,CAAG0B,OAAO,SAASC,KAAMP,EAAKG,WAAWC,IAAID,WAAWC,IAAxD,wCAEJ,8BACI,cAAC,IAAD,CAAQI,KAAK,UAAUC,QAAM,EAACC,QAAS,kBArC7C,SAACV,GACnBhB,EAAa2B,QAAQX,GACrBb,QAAQC,IAAI,4BAmCuDwB,CAAcZ,IAAzD,0CAXgBA,EAAKa,KAJrC,SAoBM7B,EAAaW,WAAaX,EAAaU,SACrC,8BACI,cAAC,IAAD,CAAMoB,IAAK,kC,iIC3EvC,IAAMC,EAAKvC,IAAOwC,GAAV,KAaOC,UARf,WACI,OACI,qCACI,cAACF,EAAD,mDACA,cAACG,EAAD","file":"static/js/8.51b3a4ac.chunk.js","sourcesContent":["//图片上传的历史记录， 因为在 history 上可能会有其他东西，所以新建了这个组件\r\n//单一功能最好放在单一的组件里\r\nimport React, { useEffect } from 'react'\r\nimport { observer } from 'mobx-react'\r\nimport { useStores } from '../stores'\r\nimport InfiniteScroll from 'react-infinite-scroller'\r\nimport { List, Spin, Button } from 'antd'\r\nimport  styled  from 'styled-components'\r\n\r\n\r\n//  object-fit: contain;   被替换的内容将被缩放，以在填充元素的内容框时保持其宽高比\r\n//box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.6); //x偏移量 | y偏移量 | 阴影模糊半径 | 阴影扩散半径 | 阴影颜色\r\nconst Img = styled.img`\r\n    width: 180px;\r\n    object-fit: contain;  \r\n    border: 1px solid #eee;\r\n    box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.6); \r\n    border-radius: 6px;\r\n    transition: all .3s;\r\n`\r\nconst H5 = styled.h5`\r\n    font-size: 20px;\r\n    font-weight: 800;\r\n`\r\nconst A = styled.a`\r\n     font-size: 20px;\r\n    font-weight: 800;\r\n    color: #f2f157;\r\n`\r\n\r\nconst Component = observer(() => {\r\n    const { HistoryStore } = useStores()\r\n    const loadMore = () => {\r\n        HistoryStore.find()\r\n    }\r\n    const handleDestroy = (item) => {\r\n        HistoryStore.destroy(item)\r\n        console.log('删除成功');\r\n    }\r\n\r\n    useEffect(() => {\r\n        console.log('进入组件')\r\n        return () => {\r\n            HistoryStore.reset()\r\n        }\r\n    }, [])//[]表示只执行一次\r\n\r\n        \r\n    return(\r\n        <div>\r\n            <InfiniteScroll\r\n                initialLoad = {true}\r\n                pageStart = {0}\r\n                loadMore = {loadMore}\r\n                hasMore = { !HistoryStore.isLoading && HistoryStore.hasMore }\r\n                useWindow = { true }\r\n            >\r\n                <List \r\n                    dataSource={HistoryStore.list}\r\n                    renderItem={                       \r\n                        //       List.Item 注意 Item开头一定要写      \r\n                        item => <List.Item key={item.id}>\r\n                            <div>\r\n                                <Img src={item.attributes.url.attributes.url} />                               \r\n                            </div>\r\n                            <div>\r\n                                <H5>{item.attributes.filename}</H5>\r\n                            </div>\r\n                            <div>\r\n                                <A target='_blank' href={item.attributes.url.attributes.url}>查看图片</A>\r\n                            </div>\r\n                            <div>\r\n                                <Button type=\"primary\" danger onClick={()=>handleDestroy(item)}>删除图片</Button>\r\n                            </div>\r\n                        </List.Item>           \r\n                    }>\r\n\r\n                    { HistoryStore.isLoading && HistoryStore.hasMore && (\r\n                        <div>\r\n                            <Spin tip= '加载中'/>\r\n                        </div>\r\n                    )}        \r\n                               \r\n                </List>\r\n            </InfiniteScroll>\r\n        </div>\r\n    )\r\n})\r\nexport default Component\r\n\r\n","import React from 'react'\r\nimport List from '../components/List'\r\nimport styled from 'styled-components'\r\n\r\nconst H1 = styled.h1`\r\n    border-bottom: 2px solid #000;\r\n    padding: 20px 0;\r\n`\r\n\r\nfunction History() {\r\n    return (\r\n        <>\r\n            <H1>上传历史记录</H1>\r\n            <List />\r\n        </>\r\n    )\r\n}\r\nexport default History"],"sourceRoot":""}